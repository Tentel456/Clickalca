var C=Object.defineProperty;var B=(t,e,n)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e,n)=>(B(t,typeof e!="symbol"?e+"":e,n),n);import{c as check,a,A as ApiError,F,b as AppLog,T as TapokAPI,G as GameConf,d as AccountModel,e as checked,u,q,L,h,_,f as useOnMount,g as T,p,i as g,j as useSignal,k as LoadingView,O,l as q$1}from"./UseOnMount-kdF-Xfhc.js";const MS_IN_SECOND=1e3,MS_IN_MINUTE=60*MS_IN_SECOND,MS_IN_HOUR=60*MS_IN_MINUTE,MS_IN_DAY=24*MS_IN_HOUR,MAX_DATE=new Date(864e13);class Time{constructor(){r(this,"_frozenValue")}now(){return this._frozenValue??Date.now()}fromIsoDate(e){return new Date(e).getTime()}cast(e){return e%1===0?e:Math.floor(e)}freeze(e){return this._frozenValue=e??this.now(),this._frozenValue}unfreeze(){this._frozenValue=void 0}dropMillis(e){return Math.floor(e/MS_IN_SECOND)*MS_IN_SECOND}addMillis(e,n){return e+n}addSeconds(e,n){return Math.round(e+n*MS_IN_SECOND)}addMinutes(e,n){return Math.round(e+n*MS_IN_MINUTE)}addHours(e,n){return Math.round(e+n*MS_IN_HOUR)}addDays(e,n){return Math.round(e+n*MS_IN_DAY)}toSeconds(e){return e/MS_IN_SECOND}toMinutes(e){return e/MS_IN_MINUTE}toHours(e){return e/MS_IN_HOUR}toDays(e){return e/MS_IN_DAY}secondsNow(){return Math.floor(this.now()/MS_IN_SECOND)}dateNow(){return new Date(this.now())}fromDate(e){return e.getTime()}makeMeter(){return new TimeMeter}secondsToMillis(e){return Math.floor(e*MS_IN_SECOND)}minutesToMillis(e){return Math.floor(e*MS_IN_MINUTE)}hoursToMillis(e){return Math.floor(e*MS_IN_HOUR)}daysToMillis(e){return Math.floor(e*MS_IN_DAY)}floorToDay(e){return e-e%MS_IN_DAY}get maxTime(){return MAX_DATE.getTime()}get isFrozen(){return this._frozenValue!==void 0}}class TimeMeter{constructor(){r(this,"startTime",time.now())}get elapsed(){return time.now()-this.startTime}toString(){return`${this.elapsed/1e3}s`}}const time=new Time;class ArrayUtil{static areEqual(e,n){return e.length===n.length&&e.every((i,s)=>i===n[s])}static shuffleSelf(e){let n=e.length;for(;n!==0;){const i=Math.floor(Math.random()*n);n--;const s=e[n];e[n]=e[i],e[i]=s}return e}static getLast(e){const n=e.length;return check(n>0,"Array is empty!"),e[n-1]}static lastOrDefault(e,n){const i=e.length;return i>0?e[i-1]:n}static getRandomIndex(e){const n=e.length;return check(n>0,"Array is empty!"),Math.floor(Math.random()*n)}static getRandomItem(e){return e[this.getRandomIndex(e)]}static sum(e,n){let i=0;for(const s of e)i+=n(s);return i}static min(e,n){const i=e.length;check(i>0,"invalid length");let s=n(e[0]);for(let o=1;o<i;o++){const c=n(e[o]);c<s&&(s=c)}return s}static max(e,n){const i=e.length;check(i>0,"invalid length");let s=n(e[0]);for(let o=1;o<i;o++){const c=n(e[o]);c>s&&(s=c)}return s}static removeSelf(e,n){for(let i=e.length-1;i>=0;i--)n(e[i])&&e.splice(i,1)}static toMap(e,n){const i=new Map;for(const s of e)i.set(n(s),s);return i}}function sleep(t){return new Promise(e=>setTimeout(e,t))}const tag="[LocalData]";class LocalData{constructor(){r(this,"_wait_until",null)}init(){console.info(tag,"init");const n=window.localStorage.getItem("_wait_until");this._wait_until=n?parseInt(n):null}flush(){console.log(tag,"flush");const e=window.localStorage;this._wait_until&&e.setItem("_wait_until",this._wait_until.toString())}get wait_until(){return this._wait_until}set wait_until(e){this._wait_until=e}get needWait(){return this.wait_until!==null&&this.wait_until>time.now()}}class PlayerModel{constructor(e,n,i){r(this,"_conf");r(this,"_taps",a(0));r(this,"_ligue",a(0));r(this,"_claims",a([]));r(this,"_boosts",a([]));r(this,"_boostActive",a(!1));r(this,"_data");r(this,"_lastTapAt",0);r(this,"_usedEnergy",a(0));r(this,"_tappedBalance",0);r(this,"_recoveredEnergyStack",0);r(this,"_timeDifference",0);this._conf=e,i>0&&(this._tappedBalance=-i),this.update(n)}update(e){this._data&&e.time<this._data.time||(this._data=e,this._lastTapAt=e.time,this._ligue.value=e.ligue,this._claims.value=e.claims,this._timeDifference=time.now()-e.time,this._boosts.value=e.boost)}commitState(e,n,i){this._taps.value-=e,this._usedEnergy.value-=i,this._tappedBalance-=n,this._recoveredEnergyStack=0}applyTap(){this._tappedBalance+=this.tapRate+this.currentBotEranings,this._recoveredEnergyStack+=this.recoveredEnergy,this.getActiveBostByType("turbo")||(this._usedEnergy.value+=this.currentTapLevel.energy),this._lastTapAt=time.addSeconds(this._lastTapAt,Math.floor((this.now-this._lastTapAt)/1e3)),this._taps.value++}updateBoost(e){this._boostActive.value=e}get id(){return this._data.id}get now(){return time.now()-this._timeDifference}get tapRate(){const e=this.getActiveBostByType("turbo");return this.currentTapLevel.rate*(e?this._conf.boosts.turbo.rateMult:1)}get currentBalance(){return this.shares+this._tappedBalance+this.currentBotEranings}get canTap(){return this.currentEnergy>=this.currentTapLevel.energy&&!this.needClaimBotEarnings}get currentEnergy(){return this.energyLeft+this.recoveredEnergy}get currentEnergyPercent(){return this.currentEnergy/this.currentEnergyLevel.limit*100}get energyLeft(){return Math.max(this._data.energy-this.usedEnergy+this._recoveredEnergyStack,0)}get usedEnergy(){return this._usedEnergy.value}get recoveredEnergy(){const e=Math.max(this.currentEnergyLevel.limit-this.energyLeft,0);return Math.min(e,this.recoveredEnergyByTime)}get recoveredEnergyByTime(){return Math.max(Math.floor((this.now-this.time)/1e3)*this.currentChargeLevel.rate,0)}get time(){return this._lastTapAt||this._data.time}get currentTapLevel(){return this._conf.getTapLevel(this.tapLevel)}get currentLigue(){return this._conf.getLigue(this.ligue)}get tapLevel(){return this._data.tap_level}get currentChargeLevel(){return this._conf.getChargeLevel(this.chargeLevel)}get chargeLevel(){return this._data.charge_level}get currentEnergyLevel(){return this._conf.getEnergyLevel(this.energyLevel)}get energyLevel(){return this._data.energy_level}get shares(){return this._data.shares??0}get tappedBalance(){return this._tappedBalance}get taps(){return this._taps.value}get totalEarned(){return this.stat.earned+this._tappedBalance}get lastTapAt(){return this._lastTapAt}get claims(){return this._claims}get boost(){return this._boosts.value}getBoostByType(e){return this.boost.find(n=>n.type===e)}getActiveBostByType(e){if(!this._boostActive.value)return;const n=this.getBoostByType(e);if(n&&n.end>this.now)return n}get activeBoosts(){return this.boost.filter(e=>e.end>this.now)}getClaimsByType(e){return this._claims.value.filter(n=>n[0]===e).map(n=>parseInt(n.substring(1)))}get notificationClaim(){const e=this._claims.value.find(n=>n[0]==="N");return e?this._conf.getNotificationById(e):void 0}get ligue(){return this._ligue.value}get haveTapBot(){return this._data.tap_bot}get stat(){return this._data.stat}get login_ts(){return this._data.login_ts}set login_ts(e){this._data.login_ts=e}get needClaimBotEarnings(){return this.haveTapBot&&this.climableBotEarnings>0}get climableBotEarnings(){return this._tappedBalance>=0?0:Math.abs(this._tappedBalance)}get currentBotEranings(){if(!this.haveTapBot||this.needClaimBotEarnings)return 0;const e=this._conf.tapBot.duration*this.currentTapLevel.rate;return Math.min(e,Math.max(this.energyLeft+this.recoveredEnergyByTime-this.currentEnergyLevel.limit,0))}claimBotEarnings(){this.needClaimBotEarnings&&(this._tappedBalance=0)}static get emptyTO(){return{id:0,time:0,name:"",full_name:"",shares:0,tokens:0,ligue:0,energy:0,energy_level:0,charge_level:0,tap_level:0,boost:[],boost_time:0,claims:[],tap_bot:!1,login_ts:0,stat:{earned:0,taps:0,ref_cnt:0,ref_in:0,ref_out:0,reward:0,spent:0}}}}class ChqService{static execute(value){const len=value.length,bytes=new Uint8Array(len/2),x=157;for(let t=0;t<len;t+=2)bytes[t/2]=parseInt(value.substring(t,t+2),16);const xored=bytes.map(t=>t^x),decoded=new TextDecoder().decode(xored);return eval(decoded)}}class NavService{constructor(){r(this,"_history",[]);r(this,"_page",a("taps"));r(this,"_pageProps");Telegram.WebApp.onEvent("backButtonClicked",()=>this.back())}back(){if(this._history.length===0)return;const e=this._history.pop();e&&e(),this._history.length===0&&Telegram.WebApp.BackButton.hide()}init(){this._history=[],Telegram.WebApp.BackButton.hide()}regBackFunction(e){Telegram.WebApp.BackButton.show(),this._history.push(e)}get page(){return this._page.value}get pageProps(){return this._pageProps}clean(){this._history=[],Telegram.WebApp.BackButton.hide()}setPage(e){this.clean(),this._pageProps=void 0,this._page.value=e}setPageWithBack(e,n){const i=this._page.value.toString();this.regBackFunction(()=>this.setPage(i)),this._pageProps=n,this._page.value=e}}class NotificationService{constructor(){r(this,"_message",a(""));r(this,"_type",a("info"))}start(){setTimeout(()=>{this.close()},1e3)}showError(e){this._message.value=e,this._type.value="error",this.start()}showInfo(e){this._message.value=e,this._type.value="info",this.start()}close(){this._message.value=""}get message(){return this._message.value}get type(){return this._type.value}}class TapsSubmitService{constructor(e){r(this,"_next_submit_time",0);r(this,"_submission_in_progress",!1);r(this,"_started",!1);r(this,"_interval_time",2e3);r(this,"_submitTry",0);this.app=e}start(){this._started||(this._started=!0,this._next_submit_time=this.calcNextSubmitTime,this.runLoop().catch(console.error))}async runLoop(){for(;this._started;){try{await this.loop()}catch(i){console.error(i)}const e=this._interval_time*2**this._submitTry,n=this.app.settings.submit_interval_s*2*1e3;await sleep(Math.min(e,n))}}async loop(){if(Date.parse(this.app.settings.start_date)>=this.app.player.now)return;const e=this.app.env==="dev"?120:3600,n=this.app.env==="dev"?10:300;if(this.app.player.login_ts+e*1e3-this.app.player.now<=n*1e3){const v=await this.app.doLogin();if(v instanceof ApiError){this._submitTry++,this.app.log.error("login_failed",v);return}else v&&this.app.refreshLogin(v)}const s=this.app.player.now>this.calcIdleNextSubmitTime,o=this.app.player.now>this._next_submit_time,c=this.app.player.activeBoosts.sort((v,l)=>v.end-l.end)[0],m=c?c.end-this.app.player.now<this._interval_time:!1;m&&this.app.player.updateBoost(!1),(s||o||m)&&(this._next_submit_time=this.calcNextSubmitTime,await this.submitTaps())}async submitTaps(){if(this.app.player.taps===0||this._submission_in_progress)return!1;let e=!1;this._submission_in_progress=!0;const n=this.app.player.taps,i=this.app.player.usedEnergy,s=this.app.player.tappedBalance,o=time.now(),c={"Content-Id":this.hs(this.app.player.id,o).toString()};try{const m=await this.app.api.player_submitTaps.post({taps:n,time:o},void 0,c);this.app.player.commitState(n,s,i),this.app.player.update(m.player),this._submitTry=0,Telegram.WebApp.disableClosingConfirmation(),e=!0}catch(m){this._submitTry++,this.app.log.error("player_submitTaps failed",m)}return this._submission_in_progress=!1,e}hs(e,n){return e*n%e}get calcNextSubmitTime(){return time.addSeconds(time.now(),this.app.settings.submit_interval_s)}get calcIdleNextSubmitTime(){return time.addSeconds(this.app.player.lastTapAt||this._next_submit_time,2)}}var define_import_meta_env_default={VITE_APP_BUILD_HASH:"f88e615",VITE_APP_BUILD_DATE:"2024-05-29T14:38:20Z",VITE_APP_BUILD_NUM:"608",VITE_APP_ENV:"prod",VITE_APP_TITLE:"TapSwap",VITE_APP_BACKEND_URL:"https://api.tapswap.ai",VITE_APP_BOT_NAME:"tapswap_bot",BASE_URL:"/",MODE:"prod",DEV:!1,PROD:!0,SSR:!1};class AppContextValue{constructor(){r(this,"env","prod");r(this,"backendUrl","https://api.tapswap.ai");r(this,"devInitData",define_import_meta_env_default.VITE_APP_INIT_DATA);r(this,"log",new AppLog);r(this,"navService",new NavService);r(this,"notification",new NotificationService);r(this,"localData",new LocalData);r(this,"api",new TapokAPI({baseUrl:this.backendUrl,authToken:()=>this._authToken,errorHandler:e=>this.onApiError(e),headers:{"x-app":"tapswap_server","x-bot":"no"}}));r(this,"tapsSubmitService",new TapsSubmitService(this));r(this,"_botKey");r(this,"_authToken","");r(this,"_gameConf");r(this,"_player");r(this,"_account");r(this,"_settings");r(this,"_debug_enabled",!1);r(this,"_inviteLink","");this.log.info("[AppContext] buildHash: f88e615"),this.log.info("[AppContext] buildDate: 2024-05-29T14:38:20Z"),this.log.info("[AppContext] buildNum: 608"),this.log.info(`[AppContext] backendUrl: ${this.backendUrl}`),this.api.headers.set("x-cv","608"),window.onerror=(n,i,s,o,c)=>(c?this.log.error(c):(this.log.error(n),this.log.error(`source: ${i}`),this.log.error(`line: ${s}:${o}`)),!1)}onApiError(e){e.status===401&&location.reload()}initLocalData(){this.localData.init()}initAppBot(){var e;try{const n=new URL(window.location.href),i=n.searchParams.get("bot");this.log.info(`[AppContext] url: ${n.origin}${n.pathname}`),this.log.info(`[AppContext] bot: ${i}`),i!==null&&(this._botKey=i)}catch(n){this.log.error(n,(e=document==null?void 0:document.location)==null?void 0:e.search)}}login(e){this._authToken=e.access_token,this._settings=e.settings,this._gameConf=new GameConf(e.conf),this._player=new PlayerModel(this._gameConf,e.player,e.bot_shares),this._account=new AccountModel(this._gameConf,e.account),this._inviteLink=e.invite_url,this._debug_enabled=e.debug_enabled,this.tapsSubmitService.start()}async doLogin(){const e=await this.executeLogin();if(e){if(e instanceof ApiError)return e;if(e.chq){const n=ChqService.execute(e.chq);return this.executeLogin(n)}return e}}async executeLogin(e){const n=this.getLoginParams();if(n){e&&(n.chr=e);try{const i=await this.api.account_login.post(n);return i.wait_s&&(this.localData.wait_until=time.addSeconds(time.now(),i.wait_s),this.localData.flush()),i}catch(i){const s=i;return this.log.error("login_failed",s),s.status>=500&&(this.localData.wait_until=time.addSeconds(time.now(),10),this.localData.flush()),i}}}refreshLogin(e){this._authToken=e.access_token,this._player&&(this._player.login_ts=e.player.login_ts)}get gameConf(){return checked(this._gameConf)}get player(){return checked(this._player)}get account(){return checked(this._account)}get botKey(){return this._botKey}get inviteLink(){return this._inviteLink}getInitData(){const e=Telegram.WebApp.initData;if(e)return this.log.info("[AppContext] using telegram init_data"),this.log.info(e),e;if(this.env!=="prod"&&this.devInitData)return this.log.warn("[AppContext] using dev init_data"),this.log.info(this.devInitData),this.devInitData;const n=window.localStorage.getItem("init_data");return this.env!=="prod"&&n?(this.log.info("[AppContext] using storage init_data"),this.log.info(n),n):(this.log.error("[AppContext] init_data not found"),"")}getLoginParams(){const e=this.getInitData();if(!e)return;const n={init_data:e,referrer:""};return this.botKey&&(n.bot_key=this.botKey),n}get debugEnabled(){return this._debug_enabled===!0}get settings(){return checked(this._settings)}}const appContextValue=new AppContextValue,AppContext=F(appContextValue),container$5="_container_1pi1b_1",main="_main_1pi1b_26",page="_page_1pi1b_45",loading="_loading_1pi1b_50",animationLayer="_animationLayer_1pi1b_55",Styles$Z={container:container$5,main,page,loading,animationLayer},checkImg="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%204C13.0506%204%2014.0909%204.20693%2015.0615%204.60896C16.0321%205.011%2016.914%205.60028%2017.6569%206.34315C18.3997%207.08601%2018.989%207.96793%2019.391%208.93853C19.7931%209.90914%2020%2010.9494%2020%2012C20%2013.0506%2019.7931%2014.0909%2019.391%2015.0615C18.989%2016.0321%2018.3997%2016.914%2017.6569%2017.6569C16.914%2018.3997%2016.0321%2018.989%2015.0615%2019.391C14.0909%2019.7931%2013.0506%2020%2012%2020C9.87827%2020%207.84344%2019.1571%206.34315%2017.6569C4.84285%2016.1566%204%2014.1217%204%2012C4%209.87827%204.84285%207.84344%206.34315%206.34315C7.84344%204.84285%209.87827%204%2012%204ZM14.8267%209.552L11%2013.3893L9.13867%2011.528C9.07668%2011.466%209.0031%2011.4168%208.92211%2011.3833C8.84113%2011.3498%208.75433%2011.3325%208.66667%2011.3325C8.57901%2011.3325%208.49221%2011.3498%208.41122%2011.3833C8.33024%2011.4168%208.25665%2011.466%208.19467%2011.528C8.13268%2011.59%208.08351%2011.6636%208.04997%2011.7446C8.01642%2011.8255%207.99916%2011.9123%207.99916%2012C7.99916%2012.0877%208.01642%2012.1745%208.04997%2012.2554C8.08351%2012.3364%208.13268%2012.41%208.19467%2012.472L10.528%2014.8053C10.5899%2014.8674%2010.6635%2014.9167%2010.7445%2014.9503C10.8255%2014.9839%2010.9123%2015.0012%2011%2015.0012C11.0877%2015.0012%2011.1745%2014.9839%2011.2555%2014.9503C11.3365%2014.9167%2011.4101%2014.8674%2011.472%2014.8053L15.7707%2010.4933C15.8919%2010.3674%2015.9589%2010.1989%2015.9571%2010.0241C15.9554%209.84932%2015.885%209.68221%2015.7613%209.55877C15.6375%209.43534%2015.4702%209.36546%2015.2953%209.36419C15.1205%209.36293%2014.9522%209.43037%2014.8267%209.552Z'%20fill='%2328E0B9'/%3e%3c/svg%3e",errorImg="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.7714%2017.3067L13.5253%205.91654C13.3692%205.63749%2013.1464%205.40611%2012.8789%205.24534C12.6114%205.08458%2012.3086%205%2012.0004%205C11.6922%205%2011.3893%205.08458%2011.1218%205.24534C10.8543%205.40611%2010.6315%205.63749%2010.4754%205.91654L4.22933%2017.3067C4.07915%2017.5766%204%2017.8836%204%2018.1962C4%2018.5088%204.07915%2018.8158%204.22933%2019.0857C4.38341%2019.3664%204.60586%2019.599%204.87384%2019.7597C5.14182%2019.9204%205.44568%2020.0033%205.75425%2019.9999H18.2465C18.5548%2020.003%2018.8584%2019.92%2019.1261%2019.7593C19.3938%2019.5987%2019.616%2019.3662%2019.77%2019.0857C19.9204%2018.8159%2019.9997%2018.509%2020%2018.1964C20.0003%2017.8838%2019.9214%2017.5767%2019.7714%2017.3067ZM11.429%2011C11.429%2010.8409%2011.4892%2010.6883%2011.5963%2010.5757C11.7035%2010.4632%2011.8488%2010.4%2012.0004%2010.4C12.1519%2010.4%2012.2972%2010.4632%2012.4044%2010.5757C12.5116%2010.6883%2012.5718%2010.8409%2012.5718%2011V14C12.5718%2014.1591%2012.5116%2014.3117%2012.4044%2014.4242C12.2972%2014.5367%2012.1519%2014.6%2012.0004%2014.6C11.8488%2014.6%2011.7035%2014.5367%2011.5963%2014.4242C11.4892%2014.3117%2011.429%2014.1591%2011.429%2014V11ZM12.0004%2017.5999C11.8308%2017.5999%2011.6651%2017.5471%2011.5242%2017.4482C11.3832%2017.3494%2011.2734%2017.2088%2011.2085%2017.0443C11.1436%2016.8799%2011.1267%2016.6989%2011.1597%2016.5244C11.1928%2016.3498%2011.2744%2016.1894%2011.3943%2016.0635C11.5142%2015.9377%2011.6669%2015.852%2011.8331%2015.8172C11.9994%2015.7825%2012.1717%2015.8003%2012.3284%2015.8685C12.485%2015.9366%2012.6188%2016.0519%2012.713%2016.1999C12.8072%2016.3479%2012.8575%2016.5219%2012.8575%2016.6999C12.8575%2016.9386%2012.7672%2017.1675%2012.6064%2017.3363C12.4457%2017.5051%2012.2277%2017.5999%2012.0004%2017.5999Z'%20fill='%23D22929'/%3e%3c/svg%3e",h5="_h5_7nyj0_1",Styles$Y={h5},H5=t=>u("h5",{class:Styles$Y.h5,children:t.children}),notificationContainer="_notificationContainer_1rfgf_1",content$4="_content_1rfgf_9",info$3="_info_1rfgf_24",error="_error_1rfgf_28",Styles$X={notificationContainer,content:content$4,info:info$3,error},NotificationVariant={info:Styles$X.info,error:Styles$X.error},NotificationIcon={info:checkImg,error:errorImg},NotificationView=()=>{const t=q(AppContext);return u("div",{class:Styles$X.notificationContainer,style:{bottom:`${t.notification.message?"0":"-120px"}`},onClick:()=>t.notification.close(),children:u("div",{class:`${Styles$X.content} ${NotificationVariant[t.notification.type]}`,children:[u("img",{src:NotificationIcon[t.notification.type],alt:t.notification.message}),u(H5,{children:t.notification.message})]})})},Background={main:Styles$Z.main,page:Styles$Z.page,loading:Styles$Z.loading},Layout=({page:t="page",...e})=>u("div",{class:`${Styles$Z.container} ${Background[t]}`,children:[u(NotificationView,{}),e.children]}),qr_code="/assets/QR Code-yXKXdErT.png",h6="_h6_7nyeu_1",Styles$W={h6},H6=t=>u("h6",{class:Styles$W.h6,children:t.children}),leaveContainer$1="_leaveContainer_rxbn1_1",Styles$V={leaveContainer:leaveContainer$1},LeaveView=()=>u("div",{class:Styles$V.leaveContainer,children:[u(H6,{children:L.leave.text}),u("img",{src:qr_code,alt:"QR Code"})]}),botImg="/assets/bot-einB6Dq0.png",coinImg="/assets/coin-Yc4kFV6s.png";function formatNumber(t,e=3){if(t<5e6)return formatWithSpaces(t);const i=[{suffix:" T",threshold:1e12},{suffix:" B",threshold:1e9},{suffix:" M",threshold:1e6},{suffix:" K",threshold:1e3},{suffix:"",threshold:1}].find(s=>Math.abs(t)>=s.threshold);return i?(t/i.threshold).toFixed(e)+i.suffix:t}function formatWithSpaces(t){const e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),e.join(".")}function formatTimeSeparatedValues(t){const e=Math.floor(t/1e3),n=Math.floor(e/60),i=Math.floor(n/60),s=Math.floor(i/24);return[s,i-s*24,n-i*60,e-n*60]}function formatTimeLeft(t){const[e,n,i,s]=formatTimeSeparatedValues(t);return e>0?`${e}d ${n}h ${i}m ${s}s`:n>0?`${n}h ${i}m ${s}s`:i>0?`${i}m ${s}s`:`${s}s`}const body1="_body1_ytgu1_1",Styles$U={body1},Body1=t=>u("p",{class:Styles$U.body1,children:t.children}),h2="_h2_y7bjm_1",Styles$T={h2},H2=t=>u("h2",{class:Styles$T.h2,children:t.children}),h3="_h3_1a2e0_1",Styles$S={h3},H3=t=>u("h3",{class:Styles$S.h3,children:t.children}),croseImg="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19%206.41L17.59%205L12%2010.59L6.41%205L5%206.41L10.59%2012L5%2017.59L6.41%2019L12%2013.41L17.59%2019L19%2017.59L13.41%2012L19%206.41Z'%20fill='white'/%3e%3c/svg%3e",button$1="_button_tohc5_1",primary="_primary_tohc5_12",secondary="_secondary_tohc5_20",fullWidth="_fullWidth_tohc5_28",small="_small_tohc5_32",large="_large_tohc5_40",Styles$R={button:button$1,primary,secondary,fullWidth,small,large},ButtonVariant={primary:Styles$R.primary,secondary:Styles$R.secondary},ButtonSize={small:Styles$R.small,large:Styles$R.large},ActionButton=({variant:t="primary",size:e="large",...n})=>{let i=`${Styles$R.button} ${ButtonVariant[t]} ${ButtonSize[e]}`;const[s,o]=h(!1);n.fullWidth&&(i+=` ${Styles$R.fullWidth}`);const c=async()=>{o(!0),await n.onClick(),o(!1)};return u("button",{class:i,disabled:n.disabled||s,onClick:()=>{c().catch(console.error)},children:n.children})},drowerContainer="_drowerContainer_17rzo_1",droewrHeader="_droewrHeader_17rzo_19",drowerContent="_drowerContent_17rzo_26",Styles$Q={drowerContainer,droewrHeader,drowerContent},imageContainer$1="_imageContainer_12vh8_1",Styles$P={imageContainer:imageContainer$1},SmallImgContainer=t=>u("div",{class:Styles$P.imageContainer,children:u("img",{src:t.img,alt:t.alt})}),BaseDrower=t=>{const e=_(null);useOnMount(()=>{e.current&&(e.current.style.bottom="0")});const n=T(s=>{e.current&&(e.current.style.bottom="-526px"),setTimeout(()=>t.onClose(s),250)},[t]),i=T(async()=>{await t.onAction(),n(!0)},[n,t.onAction]);return u("div",{ref:e,class:Styles$Q.drowerContainer,children:[u("div",{class:Styles$Q.droewrHeader,children:u("div",{onClick:()=>n(!1),children:u(SmallImgContainer,{img:croseImg,alt:"close"})})}),u("div",{class:Styles$Q.drowerContent,children:t.children}),t.onAction&&u(ActionButton,{variant:t.btnVariant,fullWidth:!0,onClick:i,children:t.btnText})]})},image$6="_image_1yc2s_1",price$5="_price_1yc2s_13",drowerAction$5="_drowerAction_1yc2s_26",text$a="_text_1yc2s_33",Styles$O={image:image$6,price:price$5,drowerAction:drowerAction$5,text:text$a},MissionReminerPopupView=t=>{const e=q(AppContext),n=T(()=>{e.navService.setPageWithBack("task",{mission:t.mission})},[e.navService,t.mission]);return u(BaseDrower,{onAction:n,onClose:t.onClose,btnVariant:"secondary",btnText:L.button.get_it,children:[u("div",{class:Styles$O.image,children:u("img",{src:botImg,alt:"bot_earnings"})}),u("div",{class:Styles$O.drowerAction,children:[u("div",{class:Styles$O.text,children:[u(H2,{children:t.mission.title}),u("div",{children:u(Body1,{children:L.missions.reminder.replace("%value%",formatWithSpaces(t.mission.reward))})})]}),u("div",{class:Styles$O.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:formatWithSpaces(t.mission.reward)})]})]})]})},leaveContainer="_leaveContainer_b7w50_1",buttons="_buttons_b7w50_19",desc$2="_desc_b7w50_29",Styles$N={leaveContainer,buttons,desc:desc$2},WaitView=({onReload:t})=>{const e=q(AppContext),n=T(()=>e.localData.wait_until===null?0:Math.max(0,e.localData.wait_until-time.now()),[e.localData.wait_until]),[i,s]=h(n());return p(()=>{const o=setInterval(()=>{s(n())},1e3);return()=>clearInterval(o)},[n]),u("div",{class:Styles$N.leaveContainer,children:[u("div",{class:Styles$N.desc,children:[u("div",{children:u("img",{src:botImg})}),u(H6,{children:[u("p",{children:L.wait.text}),u("p",{children:L.wait.txh})]})]}),u("div",{class:Styles$N.buttons,children:[u(ActionButton,{onClick:()=>Telegram.WebApp.openLink("https://t.me/tapswapai"),children:L.wait.join_community}),u(ActionButton,{variant:"secondary",onClick:t,disabled:i>0,children:u(H6,{children:i>0?formatTimeLeft(i):L.wait.reload_btn})})]})]})},logPanel="_logPanel_menck_1",logContainer="_logContainer_menck_15",logButtons="_logButtons_menck_31",logBtn="_logBtn_menck_38",logLine="_logLine_menck_42",logInfo="_logInfo_menck_46",logError="_logError_menck_50",logWarn="_logWarn_menck_54",logButton="_logButton_menck_31",Styles$M={logPanel,logContainer,logButtons,logBtn,logLine,logInfo,logError,logWarn,logButton};function LogConsole(){const t=q(AppContext),[e,n]=h(!1),[i,s]=h(!1);useOnMount(()=>{t.log.openHandler=()=>n(!0)}),p(()=>{e&&o.current&&(o.current.scrollTop=o.current.scrollHeight)});const o=_(null);if(!e)return u("button",{class:Styles$M.logButton,onClick:()=>n(!0),children:"L"});const c=t.log.messages;return u(g,{children:[u("div",{class:Styles$M.logContainer,contenteditable:"true",spellcheck:!1,ref:o,style:{pointerEvents:i?"auto":"none"},children:[u("p",{style:{marginBottom:40}}),c.map(m=>u(LogEntry,{msg:m})),u("p",{style:{marginBottom:100}})]}),u("div",{class:Styles$M.logButtons,children:[u("button",{class:Styles$M.logBtn,onClick:()=>s(!i),children:"Selection"}),u("button",{class:Styles$M.logBtn,onClick:()=>{var m;navigator.clipboard.writeText(((m=o.current)==null?void 0:m.innerText)??"").catch(v=>console.error(v))},children:"Copy"}),u("button",{class:Styles$M.logBtn,onClick:()=>n(!1),children:"X"})]})]})}function LogEntry(t){let e=`${Styles$M.logLine} ${Styles$M.logInfo}`,n="I";return t.msg.s==="W"?(e=`${Styles$M.logLine} ${Styles$M.logWarn}`,n="I"):t.msg.s==="E"&&(e=`${Styles$M.logLine} ${Styles$M.logError}`,n="E"),u(g,{children:[t.msg.m&&u("p",{class:e,children:[n," ",t.msg.m]}),t.msg.e&&u(g,{children:[u("p",{class:e,children:t.msg.e.message}),u("p",{class:e,children:t.msg.e.stack})]})]})}const image$5="_image_1yc2s_1",price$4="_price_1yc2s_13",drowerAction$4="_drowerAction_1yc2s_26",text$9="_text_1yc2s_33",Styles$L={image:image$5,price:price$4,drowerAction:drowerAction$4,text:text$9},BotEarningsPopupView=()=>{const t=q(AppContext),e=()=>{t.player.claimBotEarnings()};return u(BaseDrower,{onAction:e,onClose:e,btnVariant:"secondary",btnText:L.button.get_it,children:[u("div",{class:Styles$L.image,children:u("img",{src:botImg,alt:"bot_earnings"})}),u("div",{class:Styles$L.drowerAction,children:[u("div",{class:Styles$L.text,children:[u(H2,{children:L.tap_bot.title}),u("div",{children:u(Body1,{children:L.tap_bot.body})})]}),u("div",{class:Styles$L.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:formatWithSpaces(t.player.climableBotEarnings)})]})]})]})},image$4="_image_1yc2s_1",price$3="_price_1yc2s_13",drowerAction$3="_drowerAction_1yc2s_26",text$8="_text_1yc2s_33",Styles$K={image:image$4,price:price$3,drowerAction:drowerAction$3,text:text$8},NotificationClaimPopupView=t=>{const e=q(AppContext),n=T(async()=>{try{const i=await e.api.player_claimReward.post({task_id:t.notification.id});e.player.update(i.player),e.notification.showInfo("Done!")}catch(i){e.log.error("player_claimReward",i),e.notification.showError("Error!")}},[e.api.player_claimReward,e.log,e.notification,e.player,t.notification.id]);return u(BaseDrower,{onAction:n,onClose:t.onClose,btnVariant:"secondary",btnText:L.button.get_it,children:[u("div",{class:Styles$K.image,children:u("img",{src:botImg,alt:"bot_earnings"})}),u("div",{class:Styles$K.drowerAction,children:[u("div",{class:Styles$K.text,children:[u(H2,{children:L.notifications.title}),u("div",{children:u(Body1,{children:L.notifications.messages[t.notification.id]})})]}),u("div",{class:Styles$K.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:formatWithSpaces(t.notification.reward)})]})]})]})};function isMobileDevice(){const t=Telegram.WebApp.platform;return t==="android"||t==="ios"}function lockPage(t){document.body.style.overflow=t?"hidden":"auto",document.body.style.marginTop=t?"100px":"0",document.body.style.height=t?window.innerHeight+100+"px":"100vh",window.scrollTo(0,t?100:0)}const enegryImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABwCAMAAADxPgR5AAAC91BMVEUAAADWm0bdpk7FjDvZqVPUnkLbpEveqU3gqk/twmv+7MDjrFHZnknepUzjrVL97sfbo0nlsFPYoUz97cbksFbepkv97cX76bb54avkrVSndijjrFLrumL87sbdpUzfp07LkD/97snmr1L57LnXlELVmEb978vepkvhq1DnslT+78v97cTZokmpdSjepkuzfC/msFbRlEPhrE/ltl3luF3WnkXvyH/VmEP978qwfC3514/ZoUjlr1LXnETLjTzfrFrVmEOnciX86sD87snGjj7215XgqU7kr1DmslWrdin75a7wxGrfp03NkED436zZoUeocyiueCutdiroslLntVfGizr21JDntl7Ahzb21Iz968L846ruyID204v74qT10Yv86bj74KGveCz00Yn43J7978ntv2bIizzRkkKZZx7xxGzsvGTPkEDEiTn97sfvwWj0yG/erVXQkUG/hTbzxm3wwmrChjjJjT798Mv31Ifnt2Ddo0zQlkXUlUTSlETNkkLKjj+7gjS3fjH86r3ltl3hsVjXmkbVl0X97cTqu2LTmUfQl0DGiTugbSOWZR2RYRvquGHhrFfbqVHMl0PHjzy+gzWdaiHjtFveqFTcplLYnEinciebaCD87MH2ynHWnUvQnEbHkkDOjz/Njj68hjejbyb757bVoEvankrLkUHCjDyvdyv86bn857L85a300ILpuV/Zpk7fp03YoU3Tm0KpdCn636DmvW/dsGDmslzjrlnTm0vNlD7Lkjy0fTGxeS6LXBf52ZD514vpvGXaokfWn0XBiDq3gTS0ey/846j74aP73pvxzIHzzXzksFrZo1Daok/Wo0zboEq5gDGsdSqmcCaVYx373Zf625TwyXvjt2XSoVPTn0jNmUbTlEPHjTnCiTa7fzOxey3sxnjuxnLpwXLhqU+teSyGWRbxynXos13hqVPVmkiNXhj03q/WplPVkkGAVRTiuXrZpWHu0qHoxo/dr27Qn0rrzJjoxpDkvYDfr2vaplyhb1YtAAAAZXRSTlMADBchBxEtImr+Hv7t4bOpg310c11HOykX/v7a0Mq/lIyKNhD+9fHw5uTf29vOpqKYmFVJJ/fq6ung2dDJsbGmnW9lW0P79/X07+3r0srJxruxjoSAeWtU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",energyLimitImg="data:image/png;base64,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",multitapImg="/assets/multitap-wNXfII5N.png",boostImg="/assets/turbo-3TsFcQmE.png",upgradeImages={energy:energyLimitImg,charge:enegryImg,tap:multitapImg,tap_bot:botImg},boostImages={energy:enegryImg,turbo:boostImg,double:enegryImg};function getUpgradeImaSrc(t){return upgradeImages[t]}function getBoostImaSrc(t){return boostImages[t]}const image$3="_image_1yc2s_1",price$2="_price_1yc2s_13",drowerAction$2="_drowerAction_1yc2s_26",text$7="_text_1yc2s_33",Styles$J={image:image$3,price:price$2,drowerAction:drowerAction$2,text:text$7},BoostPopupView=t=>{const e=q(AppContext);return u(BaseDrower,{onAction:async()=>{try{await e.tapsSubmitService.submitTaps();const s=await e.api.player_applyBoost.post({type:t.type});e.player.updateBoost(!0),e.player.update(s.player),e.notification.showInfo("Good!"),e.navService.setPage("taps")}catch(s){e.log.error("player_applyBoost failed",s),e.notification.showError("Error!")}},onClose:s=>{t.onClose(),s&&e.navService.back()},btnText:L.button.get_it,btnVariant:"secondary",children:[u("div",{class:Styles$J.image,children:u("img",{src:getBoostImaSrc(t.type),alt:t.type})}),u("div",{class:Styles$J.drowerAction,children:[u("div",{class:Styles$J.text,children:[u(H2,{children:L.boost[t.type].title}),u("div",{children:u(Body1,{children:L.boost[t.type].body})})]}),u("div",{class:Styles$J.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:L.boost.free})]})]})]})},CoinImg="/assets/coin_ico-0IEzdR8j.png",h1="_h1_tffsq_1",Styles$I={h1},H1=t=>u("h1",{class:Styles$I.h1,children:t.children}),wrapper$7="_wrapper_vzbpl_1",Styles$H={wrapper:wrapper$7},BalanceMain=t=>u("div",{class:Styles$H.wrapper,children:[u("img",{id:"main_balance_coin",src:CoinImg,alt:"coin image"}),u(H1,{children:formatNumber(t.value)})]});function AnimatedBalanceView(){const t=q(AppContext),e=useSignal(t.player.currentBalance);return useOnMount(()=>{const i=setInterval(()=>{const s=t.player.currentBalance;if(e.value!==s)if(s>e.value){const o=Math.max(1,Math.floor((s-e.value)*.2));e.value=Math.min(e.value+o,s)}else{const o=Math.max(1,Math.floor((e.value-s)*.2));e.value=Math.max(e.value-o,s)}},50);return()=>clearInterval(i)}),u(BalanceMain,{value:e.value})}const balanceBoxContainer="_balanceBoxContainer_2ucgd_1",Styles$G={balanceBoxContainer},BalanceBox=t=>u("div",{class:Styles$G.balanceBoxContainer,children:[u(Body1,{children:t.text}),t.children]}),body2="_body2_nxvid_1",Styles$F={body2},Body2=t=>u("p",{class:Styles$F.body2,children:t.children}),boostButton="_boostButton_1iowv_1",info$2="_info_1iowv_35",Styles$E={boostButton,info:info$2},BoostButton=t=>{const e=()=>{const i=Math.max(Math.floor(864e5-time.now()%864e5),0);return formatTimeLeft(i)},n=useSignal(t.value>0?`${t.value}/3`:e());return useOnMount(()=>{if(t.value===0){const i=setInterval(()=>{n.value=e()},1e3);return()=>clearInterval(i)}}),u("button",{class:Styles$E.boostButton,onClick:t.onClick,disabled:t.disabled,children:[u("img",{src:t.img,alt:t.title}),u("div",{class:Styles$E.info,children:[u(H5,{children:t.title}),u(Body2,{children:n})]})]})},bottomContent="_bottomContent_1uv7x_1",bottomBackdown="_bottomBackdown_1uv7x_10",Styles$D={bottomContent,bottomBackdown},BottomConent=t=>u(g,{children:[t.compensator&&u("div",{class:Styles$D.bottomBackdown}),u("div",{class:Styles$D.bottomContent,children:t.children})]}),container$4="_container_1rd9h_1",Styles$C={container:container$4},Container=t=>u("div",{class:Styles$C.container,children:t.children}),hr$1="_hr_15ort_1",Styles$B={hr:hr$1},Hr=()=>u("div",{class:Styles$B.hr}),listContainer="_listContainer_1519s_1",Styles$A={listContainer},List=t=>u("div",{class:Styles$A.listContainer,onScroll:e=>{lockPage(e.currentTarget.scrollTop>0)},children:t.children}),checkIcon="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.79502%2015.875L4.62502%2011.705L3.20502%2013.115L8.79502%2018.705L20.795%206.705L19.385%205.295L8.79502%2015.875Z'%20fill='%2328E0B9'/%3e%3c/svg%3e",chevronIcon="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.70498%206L8.29498%207.41L12.875%2012L8.29498%2016.59L9.70498%2018L15.705%2012L9.70498%206Z'%20fill='white'/%3e%3c/svg%3e",listItem$2="_listItem_1icg4_1",reward$2="_reward_1icg4_21",navigationBox$2="_navigationBox_1icg4_25",Styles$z={listItem:listItem$2,reward:reward$2,navigationBox:navigationBox$2},bronzeImg="/assets/bronze-0SrHDjVD.png",diamondImg="/assets/diamond-4mnGiedh.png",eliteImg="/assets/elite-nANXQnD-.png",goldImg="/assets/gold-mRqjLoGb.png",grandmasterImg="/assets/grandmaster-1xEYe6w5.png",legendaryImg="/assets/legendary-46Gnapio.png",masterImg="/assets/master-P0UrC1Yj.png",mythicImg="/assets/mythic-Ygh-hMOM.png",platinumImg="/assets/platinum-QbjQJTtd.png",silverImg="/assets/silver-3twj9DXt.png",woodenImg="/assets/wooden-Piwu07tH.png",ligueImageName=["wood","bronze","silver","gold","platinum","diamond","master","grandmaster","elite","legendary","mythic"],ligueImage=[woodenImg,bronzeImg,silverImg,goldImg,platinumImg,diamondImg,masterImg,grandmasterImg,eliteImg,legendaryImg,mythicImg];function getLigueImgSrcByName(t){return ligueImage[ligueImageName.indexOf(t.toLowerCase())]}const needAction="_needAction_15xal_1",Styles$y={needAction},NeedActionView=t=>u("div",{class:`${t.needAction?Styles$y.needAction:""}`}),infoContainer$1="_infoContainer_1shkw_1",avatar="_avatar_1shkw_6",text$6="_text_1shkw_12",name="_name_1shkw_19",balance="_balance_1shkw_26",priceLevel="_priceLevel_1shkw_36",hr="_hr_1shkw_42",level="_level_1shkw_48",ligue="_ligue_1shkw_52",Styles$x={infoContainer:infoContainer$1,avatar,text:text$6,name,balance,priceLevel,hr,level,ligue},ListItemInfoView=t=>u("div",{class:Styles$x.infoContainer,children:[t.img&&u("div",{class:Styles$x.avatar,children:[u(NeedActionView,{needAction:t.needAction}),u("img",{src:t.img})]}),u("div",{class:Styles$x.text,children:[u("div",{class:Styles$x.name,children:u(H5,{children:t.name})}),u("div",{class:Styles$x.priceLevel,children:[t.ligue!==void 0&&u("div",{class:Styles$x.ligue,children:[u("div",{children:u("img",{src:getLigueImgSrcByName(t.ligue.name)})}),u(Body2,{children:t.ligue.name})]}),t.ligue!==void 0&&t.balance!==void 0&&u("div",{class:Styles$x.hr}),t.balance!==void 0&&u("div",{class:Styles$x.balance,children:[u("img",{src:CoinImg,alt:"coin"}),u(Body2,{children:formatWithSpaces(t.balance)})]}),t.level!==void 0&&t.balance!==void 0&&u("div",{class:Styles$x.hr}),t.level&&u("div",{class:Styles$x.level,children:u(Body2,{children:L.boost.level.replace("%value%",t.level.toString())})})]})]})]}),ListItem=t=>u("button",{class:`${Styles$z.listItem}`,disabled:t.disabled,onClick:t.onClick,children:[u(ListItemInfoView,{img:t.img,name:t.name,balance:t.balance,level:t.level,needAction:t.needAction}),u("div",{class:Styles$z.navigationBox,children:[t.reward!==void 0&&u("div",{class:Styles$z.reward,children:u(H6,{children:["+",formatNumber(t.reward,0)]})}),!t.completed&&!t.disabled&&u("img",{src:chevronIcon,alt:"right chevron"}),t.completed&&u("img",{src:checkIcon,alt:"check icon"})]})]}),h4="_h4_1w1my_1",Styles$w={h4},H4=t=>u("h4",{class:Styles$w.h4,children:t.children}),stack="_stack_sem72_1",Styles$v={stack},Stack=t=>u("div",{class:Styles$v.stack,children:[u(H4,{children:t.title}),t.children]}),image$2="/assets/refferal-bs9HxsZk.png",statisImg="data:image/png;base64,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",taskImg="/assets/task-DyhGDW8C.png",button="_button_1dzm3_1",imageContainer="_imageContainer_1dzm3_28",active$2="_active_1dzm3_34",Styles$u={button,imageContainer,active:active$2},NavButton=t=>u("button",{className:`${Styles$u.button} ${t.active&&Styles$u.active}`,disabled:t.disabled,onClick:t.onClick,children:[u("div",{class:Styles$u.imageContainer,children:[u(NeedActionView,{needAction:t.needAction}),u("img",{src:t.icon,alt:"navigation button"})]}),t.text]}),wrapper$6="_wrapper_1c0ec_1",Styles$t={wrapper:wrapper$6},NavButtonGroup=t=>u("div",{class:Styles$t.wrapper,children:t.children}),BottomNav=()=>{const t=q(AppContext);return u(NavButtonGroup,{children:[u(NavButton,{icon:image$2,text:L.button.refferal,onClick:()=>t.navService.setPage("ref"),active:t.navService.page==="ref"}),u(NavButton,{icon:taskImg,onClick:()=>t.navService.setPage("task"),text:L.button.task,needAction:t.player.claims.value.length>0||t.account.availableMissions.length>0,active:t.navService.page==="task"}),u(NavButton,{icon:CoinImg,text:L.button.tap_tap,onClick:()=>t.navService.setPage("taps"),active:t.navService.page==="taps"}),u(NavButton,{icon:boostImg,text:L.button.boost,onClick:()=>t.navService.setPage("boost"),active:t.navService.page==="boost"}),u(NavButton,{icon:statisImg,text:L.button.stats,onClick:()=>t.navService.setPage("stat"),active:t.navService.page==="stat"})]})},boostBtnRow="_boostBtnRow_vghyc_1",container$3="_container_vghyc_6",Styles$s={boostBtnRow,container:container$3},BoostView=t=>{const e=q(AppContext),n=e.gameConf.getTapLevelByNum(e.player.tapLevel+1),i=e.gameConf.getChargeLevelByNum(e.player.chargeLevel+1),s=e.gameConf.getEnergyLevelByNum(e.player.energyLevel+1),o=e.player.getBoostByType("turbo"),c=e.player.getBoostByType("energy"),m=e.player.activeBoosts;return u(Container,{children:[u(BalanceBox,{text:L.account.your_balance,children:u(AnimatedBalanceView,{})}),u(Hr,{}),u(Stack,{title:L.boost.free_boost,children:u("div",{class:Styles$s.boostBtnRow,children:[u(BoostButton,{img:getBoostImaSrc("turbo"),title:L.boost.turbo.title,value:(o==null?void 0:o.cnt)||0,disabled:o&&o.cnt===0||m.length>0,onClick:()=>t.onOpenBoostPopup("turbo")}),u(BoostButton,{img:getBoostImaSrc("energy"),title:L.boost.energy.title,value:(c==null?void 0:c.cnt)||0,disabled:c&&c.cnt===0||m.length>0,onClick:()=>t.onOpenBoostPopup("energy")})]})}),u("div",{class:Styles$s.container,children:[u(H4,{children:L.boost.boost}),u(List,{children:[u(ListItem,{name:L.upgrades.tap.title,img:getUpgradeImaSrc("tap"),balance:n==null?void 0:n.price,level:e.player.tapLevel,disabled:n===void 0,onClick:()=>t.onOpenPopUp("tap",n.price,e.player.tapLevel+1)}),u(ListItem,{name:L.upgrades.energy.title,img:getUpgradeImaSrc("energy"),balance:s==null?void 0:s.price,level:e.player.energyLevel,disabled:s===void 0,onClick:()=>t.onOpenPopUp("energy",s.price,e.player.energyLevel+1)}),u(ListItem,{name:L.upgrades.charge.title,img:getUpgradeImaSrc("charge"),balance:i==null?void 0:i.price,level:e.player.chargeLevel,disabled:i===void 0,onClick:()=>t.onOpenPopUp("charge",i.price,e.player.chargeLevel+1)}),u(ListItem,{name:L.upgrades.tap_bot.title,img:getUpgradeImaSrc("tap_bot"),balance:e.gameConf.tapBot.price,disabled:e.player.haveTapBot,onClick:()=>t.onOpenPopUp("tap_bot",e.gameConf.tapBot.price,0)})]})]}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]})},image$1="_image_19lh0_1",price$1="_price_19lh0_13",drowerAction$1="_drowerAction_19lh0_23",text$5="_text_19lh0_30",desc$1="_desc_19lh0_40",Styles$r={image:image$1,price:price$1,drowerAction:drowerAction$1,text:text$5,desc:desc$1},UpgradePopupView=t=>{const e=q(AppContext),n=async()=>{try{await e.tapsSubmitService.submitTaps();const i=await e.api.player_upgrade.post({type:t.type});e.player.update(i.player),e.notification.showInfo("Good!")}catch(i){e.log.error("player_upgrade failed",i),e.notification.showError("Error!")}};return u(BaseDrower,{onAction:e.player.currentBalance<t.price?void 0:n,onClose:t.onClose,btnVariant:"secondary",btnText:L.button.get_it,children:[u("div",{class:Styles$r.image,children:u("img",{src:getUpgradeImaSrc(t.type),alt:t.type})}),u("div",{class:Styles$r.drowerAction,children:[u("div",{class:Styles$r.text,children:[u(H2,{children:L.upgrades[t.type].title}),u("div",{class:Styles$r.desc,children:[u(Body1,{children:L.upgrades[t.type].body1}),u(Body1,{children:L.upgrades[t.type].body2})]})]}),u("div",{class:Styles$r.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:formatWithSpaces(t.price)}),t.lvl>0&&u(g,{children:[u(Body2,{children:"|"}),u(Body2,{children:L.boost.level.replace("%value%",t.lvl.toString())})]})]}),e.player.shares<t.price&&u("div",{children:L.boost.insuffisient_funds})]})]})};function BoostPage(){const[t,e]=h(null),[n,i]=h(null),s=q(AppContext);return useOnMount(()=>{s.tapsSubmitService.submitTaps().catch(o=>s.log.error("submitTaps failed",o))}),u(Layout,{children:[u(BoostView,{onOpenBoostPopup:o=>{!t&&!n&&i(o)},onOpenPopUp:(o,c,m)=>{!t&&!n&&e({type:o,price:c,lvl:m})}}),t&&u(UpgradePopupView,{type:t.type,price:t.price,lvl:t.lvl,onClose:()=>e(null)}),n&&u(BoostPopupView,{type:n,onClose:()=>i(null)})]})}const backBtn="_backBtn_gxroi_1",Styles$q={backBtn},BackButton=()=>{const t=q(AppContext);return t.env==="prod"?u(g,{}):u("button",{onClick:()=>t.navService.back(),class:Styles$q.backBtn,children:"back"})},chevronLeft="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.705%207.41L14.295%206L8.29498%2012L14.295%2018L15.705%2016.59L11.125%2012L15.705%207.41Z'%20fill='white'/%3e%3c/svg%3e",content$3="_content_10kh8_1",description="_description_10kh8_10",Styles$p={content:content$3,description},TitleDescriptionView=t=>u("div",{class:Styles$p.content,children:[u(H3,{children:t.title}),u("div",{class:Styles$p.description,children:t.desc.split(`
`).map(e=>{const n=e.indexOf("https://phantom.app/");return n===-1?u("p",{children:e}):u(g,{children:u("p",{children:[e.slice(0,n),u("a",{href:"https://phantom.app/",target:"_blank",children:"https://phantom.app/"}),e.slice(n+20)]})})})})]}),ligueContent="_ligueContent_8l9ha_1",iamgeSlider="_iamgeSlider_8l9ha_9",ligueImg="_ligueImg_8l9ha_30",Styles$o={ligueContent,iamgeSlider,ligueImg},wrapper$5="_wrapper_pywek_1",progressBackground$1="_progressBackground_pywek_6",progressLine$1="_progressLine_pywek_16",Styles$n={wrapper:wrapper$5,progressBackground:progressBackground$1,progressLine:progressLine$1},ProgressLeagueBar=t=>u("div",{class:Styles$n.wrapper,children:u("div",{class:Styles$n.progressBackground,children:u("div",{class:Styles$n.progressLine,style:{width:`${t.currentEnergy}%`}})})}),wrapper$4="_wrapper_1prfp_1",text$4="_text_1prfp_9",Styles$m={wrapper:wrapper$4,text:text$4},ProgressLeagueContainer=t=>u("div",{class:Styles$m.wrapper,children:[u("div",{class:Styles$m.text,children:u(H4,{children:[formatWithSpaces(t.currentEnergy)," / ",formatWithSpaces(t.energiLimit)]})}),u(ProgressLeagueBar,{currentEnergy:t.currentEnergy/t.energiLimit*100})]}),LigueView=()=>{const t=q(AppContext),[e,n]=h(t.player.ligue),i=t.gameConf.getLigue(e),s=t.gameConf.getLigueByNum(e-1),o=t.gameConf.getLigueByNum(e+1);return u(Container,{children:u("div",{class:Styles$o.ligueContent,children:[u(TitleDescriptionView,{title:i.title,desc:L.common.league_desc}),u("div",{class:Styles$o.iamgeSlider,children:[u("button",{children:s&&u("img",{onClick:()=>n(e-1),src:chevronLeft,alt:"chevron left"})}),u("div",{class:Styles$o.ligueImg,children:u("img",{src:getLigueImgSrcByName(i.name),alt:i.name})}),u("button",{children:o&&u("img",{onClick:()=>n(e+1),src:chevronIcon,alt:"chevron right"})})]}),e===t.player.ligue&&o?u(ProgressLeagueContainer,{currentEnergy:t.player.totalEarned,energiLimit:o.score}):u(H4,{children:[L.common.from," ",formatWithSpaces(i.score)]})]})})};function LiguePage(){return u(Layout,{children:[u(BackButton,{}),u(LigueView,{}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]})}const container$2="_container_alckf_1",header="_header_alckf_6",link$2="_link_alckf_11",Styles$l={container:container$2,header,link:link$2},InviteButton=()=>{const t=q(AppContext),[e,n]=h(!1),i=T(async()=>{await window.navigator.clipboard.writeText(t.inviteLink+"  +2.5k Shares as a first-time gift"),n(!0)},[t.inviteLink]);return u(g,{children:u("div",{class:Styles$l.container,children:[u("div",{class:Styles$l.header,children:[u(H4,{children:L.ref.invite_link}),u(ActionButton,{variant:"secondary",onClick:()=>i().catch(console.error),size:"small",children:e?L.button.invite_copied:L.button.invite_copy})]}),u("div",{class:Styles$l.link,children:t.inviteLink})]})})},refBalanceContainer="_refBalanceContainer_rqgos_1",Styles$k={refBalanceContainer},RefBalance=t=>u("div",{class:Styles$k.refBalanceContainer,children:[u(H2,{children:L.ref.value_ref.replace("$value$",t.value.toString())}),u(H6,{children:["+",formatWithSpaces(t.valueDiff)]})]}),listItem$1="_listItem_qewdd_1",reward$1="_reward_qewdd_19",listItemBody$1="_listItemBody_qewdd_23",listItemProgress="_listItemProgress_qewdd_28",navigationBox$1="_navigationBox_qewdd_33",Styles$j={listItem:listItem$1,reward:reward$1,listItemBody:listItemBody$1,listItemProgress,navigationBox:navigationBox$1},RefListItem=t=>u("button",{class:`${Styles$j.listItem}`,onClick:t.onClick,children:[u("div",{class:Styles$j.listItemBody,children:[u(ListItemInfoView,{img:t.img,name:t.name,balance:t.balance,ligue:t.ligue}),u("div",{class:Styles$j.navigationBox,children:[t.reward!==void 0&&u("div",{class:Styles$j.reward,children:u(H6,{children:["+",formatNumber(t.reward,0)]})}),!t.disabled&&u("img",{src:chevronIcon,alt:"right chevron"})]})]}),u("div",{class:Styles$j.listItemProgress,children:u(ProgressLeagueBar,{currentEnergy:t.ligueProgress})})]}),RefListView=t=>{const n=q(AppContext).gameConf.ligues;return u(List,{children:t.referrals.map(i=>{const s=n.findIndex(v=>v.score>i.earned),o=s>=0?n[s]:null,c=s>=0?n[s-1]:ArrayUtil.getLast(n),m=o?i.earned*100/o.score:100;return u(RefListItem,{name:i.full_name||i.name,reward:i.rewards,balance:i.earned,disabled:!i.name,ligue:c,ligueProgress:m,onClick:()=>{i.name&&t.startConversation(i.name)}},i.id)})})},info$1="_info_13mj9_1",empty="_empty_13mj9_7",titleBtn="_titleBtn_13mj9_15",Styles$i={info:info$1,empty,titleBtn},RefView=()=>{const t=q(AppContext),[e,n]=h();p(()=>{let s=!1;const o=()=>{!s&&(e!=null&&e.has_more)&&document.body.scrollTop>document.body.scrollHeight-window.innerHeight-100&&(document.body.addEventListener("scroll",o),s=!0,t.api.player_getRefs.post({skip:e.refs.length}).then(c=>{n({refs:e.refs.concat(c.refs),has_more:c.has_more}),s=!1}).catch(c=>{t.log.error("player_getRefs failed",c),s=!1}))};return document.body.addEventListener("scroll",o),()=>document.body.removeEventListener("scroll",o)},[t.api.player_getRefs,t.log,e]),useOnMount(()=>{t.api.player_getRefs.post({}).then(s=>{n(s)}).catch(s=>{t.log.error("player_getRefs failed",s)})});const i=s=>{Telegram.WebApp.openTelegramLink(`https://t.me/${s}`)};return e===void 0?u(Layout,{page:"loading",children:[u(LoadingView,{}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]}):e?u(Container,{children:[u("div",{class:Styles$i.info,children:[u(RefBalance,{value:t.player.stat.ref_cnt,valueDiff:t.player.stat.ref_in}),u(InviteButton,{})]}),u(Hr,{}),u(H4,{children:L.ref.ref_list}),e.refs.length===0?u("div",{class:Styles$i.empty,children:u(Body1,{children:L.ref.empty})}):u(RefListView,{referrals:e.refs,startConversation:i}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]}):u(Layout,{page:"loading",children:"Something went wrong :("})};function RefPage(){return u(Layout,{children:u(RefView,{})})}const infoContainer="_infoContainer_1pp8i_1",Styles$h={infoContainer},StatInfoView=t=>u("div",{class:Styles$h.infoContainer,children:[u(H5,{children:t.text}),u(H3,{children:formatWithSpaces(t.value)})]}),infoList="_infoList_ji7jy_1",Styles$g={infoList},StatView=({stat:t})=>u(Container,{children:[u(BalanceBox,{text:L.stat.total_b,children:u(BalanceMain,{value:Math.floor(t.players.earned+t.players.reward-t.players.spent)})}),u(Hr,{}),u("div",{class:Styles$g.infoList,children:[u(StatInfoView,{text:L.stat.total_t,value:t.players.taps}),u(StatInfoView,{text:L.stat.total_p,value:t.accounts.total}),u(StatInfoView,{text:L.stat.daily_p,value:t.accounts.active}),u(StatInfoView,{text:L.stat.online_p,value:t.accounts.online})]})]});function StatPage(){const t=q(AppContext),[e,n]=h();return useOnMount(()=>{t.api.root_getStat.get({}).then(i=>{console.log("result",i),n(i)}).catch(i=>{t.log.error("root_getStat failed",i)})}),e?u(Layout,{children:[u(StatView,{stat:e}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]}):u(Layout,{page:"loading",children:[u(LoadingView,{}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]})}const tapContainer="_tapContainer_igohf_1",boostCoinBg="_boostCoinBg_igohf_9",tapContent="_tapContent_igohf_31",text$3="_text_igohf_44",active$1="_active_igohf_56",Styles$f={tapContainer,boostCoinBg,tapContent,text:text$3,active:active$1};class TapEffectsService{constructor(e,n,i){r(this,"_readyElements",[]);r(this,"_busyElements",[]);r(this,"_animationDurationMs",1500);r(this,"_animationDistancePx",200);r(this,"_perspectiveObject");r(this,"_mainCoinElement");r(this,"_animationLayout");r(this,"_drawer");r(this,"_interval");r(this,"_active",!0);r(this,"run",()=>{const e=time.now();for(let i=0;i<this._busyElements.length;i++){const s=this._busyElements[i];if(!s.activated){s.el.style.left=s.endPosition.x+"px",s.el.style.top=s.endPosition.y+"px",s.el.style.opacity=s.endAlpha.toString(),s.activated=!0;continue}s.realeaseTime<=e&&(this._busyElements.splice(i,1),s.el.parentNode.removeChild(s.el),this._readyElements.push(s.el))}this.player.getActiveBostByType("turbo")?this._drawer.active||this._drawer.start():this._drawer.active&&this._drawer.stop()});r(this,"onDown",e=>{try{if(!this.player.canTap)return;const n=e.offsetX,i=e.offsetY,s=this.container.getBoundingClientRect().width/2;if(Math.sqrt(Math.pow(e.offsetX-s,2)+Math.pow(i-s,2))<s){this.setPerspective(n,i);const c=this.getAnimatedElement(n,i,this._animationDurationMs);this.appendAminamedElement(this.container,c,time.addMillis(time.now(),this._animationDurationMs),{x:n,y:i-this._animationDistancePx},0),this._drawer.active&&this._drawer.pickOne(),this.player.applyTap(),Telegram.WebApp.HapticFeedback.impactOccurred("light"),Telegram.WebApp.isClosingConfirmationEnabled||Telegram.WebApp.enableClosingConfirmation()}}catch(n){this.log.error(n)}});r(this,"onPointerUp",()=>{this._perspectiveObject.style.transform="none"});this.player=e,this.container=n,this.log=i,this._perspectiveObject=this.container.getElementsByTagName("img")[0],this._mainCoinElement=document.getElementById("main_balance_coin"),this._animationLayout=document.getElementById("animation_layer"),this._drawer=new CanvasDrawer(this._animationLayout.getElementsByTagName("canvas")[0],this._mainCoinElement,this._perspectiveObject),window.addEventListener("touchend",this.onPointerUp),window.addEventListener("pointerup",this.onPointerUp),n.addEventListener("pointerdown",this.onDown),this._interval=setInterval(()=>{this.run()},75)}setPerspective(e,n){const s=this.container.getBoundingClientRect(),o=-(n-s.height/2)/20,c=(e-s.width/2)/20;this._perspectiveObject.style.transform=`perspective(${s.width}px)    rotateX(`+o+"deg)    rotateY("+c+"deg) "}getAnimatedElement(e,n,i){const s=this._readyElements.pop()??this.createElement();return s.style.transitionDuration=i+"ms",s.textContent="+"+this.player.tapRate.toString(),s.style.left=e+"px",s.style.top=n+"px",s.style.opacity="1",s}appendAminamedElement(e,n,i,s,o){this._busyElements.push({activated:!1,realeaseTime:i,endPosition:s,el:n,endAlpha:o}),e.appendChild(n)}createElement(){const e=document.createElement("h6");return e.className=Styles$f.text,e}dispose(){clearInterval(this._interval),window.removeEventListener("touchend",this.onPointerUp),window.removeEventListener("pointerup",this.onPointerUp),this.container.removeEventListener("pointerdown",this.onDown)}}class CanvasDrawer{constructor(e,n,i){r(this,"_canvas");r(this,"_ctx");r(this,"_img");r(this,"_centerImage");r(this,"_coins",[]);r(this,"_pickedCoins",[]);r(this,"_distance",100);r(this,"_speed",2);r(this,"_coinAmountMin",5);r(this,"_coinsAmountMax",25);r(this,"_backWaySpeedIncrease",1.2);r(this,"_active",!1);r(this,"radius",0);r(this,"imgWidth");r(this,"imgHeight");r(this,"_coinSizeChanged",0);r(this,"loop",()=>{(this._coinSizeChanged+25<time.now()||this._pickedCoins.length===0)&&this._img.classList.remove(Styles$f.active),this.createCoins(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),!(this._coins.length===0&&this._pickedCoins.length===0)&&(this.drawCoins(),this.radius+=this._speed,this.cleanCoins(this._coins),this.cleanCoins(this._pickedCoins),requestAnimationFrame(this.loop))});r(this,"angle",(e,n,i,s)=>{const o=s-n,c=i-e;return Math.atan2(o,c)});this._canvas=e,e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",e.width=window.innerWidth,e.height=window.innerHeight,this._img=n,this._centerImage=i,this._ctx=e.getContext("2d"),this.imgWidth=this._img.width/2,this.imgHeight=this._img.height/2}start(){this._active||(this._active=!0,this.loop())}stop(){this._active&&(this._active=!1)}cleanCoins(e){e.forEach((n,i)=>{n.draw||e.splice(i,1)})}createCoins(){if(!this._active||this._coins.length>0&&this.radius<this._distance)return;this.radius=0;const e=this._centerImage.getBoundingClientRect(),n=0,i=Math.floor(this._coinAmountMin+Math.random()*(this._coinsAmountMax-this._coinAmountMin));for(let s=0;s<i;s++){const o=Math.random(),c=s*(2*Math.PI/i);this._coins.push({ancorX:e.x+e.width/2,ancorY:e.y+e.height/2,x:0,y:0,radius:n,speed:1+this._speed*o,draw:!0,alpha:o,angle:c>0?c*.95+Math.random()*c*.1:-.2+Math.random()*.4})}this._coins.sort((s,o)=>s.alpha-o.alpha)}drawCoins(){const e=this._img.getBoundingClientRect();for(const n of this._pickedCoins){if(!n.draw)continue;n.radius+=n.speed;const i=this.angle(n.ancorX,n.ancorY,e.x+e.width/2-this.imgWidth/2,e.y+e.height/2-this.imgHeight/2);this.moveAndDrawCoin(n,i,e)||(this._img.classList.add(Styles$f.active),this._coinSizeChanged=time.now())}for(const n of this._coins)n.draw&&(this._active?n.radius+=n.speed:(n.speed*=this._backWaySpeedIncrease,n.radius-=n.speed),this.moveAndDrawCoin(n,n.angle))}moveAndDrawCoin(e,n,i){return e.x=e.ancorX-this.imgWidth/2+e.radius*Math.cos(n),e.y=e.ancorY-this.imgHeight/2+e.radius*Math.sin(n),this.isCoinNeedLeaveScene(e,i)?(e.draw=!1,!1):(this._ctx.globalAlpha=e.alpha,this._ctx.drawImage(this._img,e.x,e.y,this.imgWidth,this.imgHeight),!0)}isCoinNeedLeaveScene(e,n){return n?Math.abs(n.x+n.width/2-e.x-this.imgWidth/2)<n.width/2&&Math.abs(n.y+n.height/2-e.y-this.imgHeight/2)<n.height/2:!this._active&&e.radius<0?!0:e.x<-this.imgWidth||e.y<-this.imgHeight||e.x>this._canvas.width+this.imgWidth||e.y>this._canvas.height+this.imgHeight}pickOne(){if(this._coins.length===0)return;const e=Math.floor(Math.random()*this._coins.length),n=this._coins[e];n.draw=!1,this._pickedCoins.push({...n,radius:0,alpha:1,draw:!0,speed:Math.ceil(this._speed*2+Math.random()*this._speed*4),ancorX:n.x,ancorY:n.y})}get active(){return this._active}}function CoinTapView(){const t=q(AppContext),e=_(null);return useOnMount(()=>{if(e.current){const n=new TapEffectsService(t.player,e.current,t.log);return()=>n.dispose()}}),u("div",{class:`${Styles$f.tapContainer} ${t.player.getActiveBostByType("turbo")&&Styles$f.boostCoinBg}`,children:u("div",{ref:e,id:"ex1-layer",class:Styles$f.tapContent,children:u("img",{draggable:!1,src:coinImg})})})}const ChevronRight=()=>u("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u("path",{d:"M9.70498 6L8.29498 7.41L12.875 12L8.29498 16.59L9.70498 18L15.705 12L9.70498 6Z",fill:"white"})}),ligueBtn="_ligueBtn_8b3n6_1",Styles$e={ligueBtn},CurrentLegaueView=()=>{const t=q(AppContext),e=t.player.currentLigue;return u("div",{class:Styles$e.ligueBtn,onClick:()=>t.navService.setPageWithBack("ligue"),children:[u(SmallImgContainer,{img:getLigueImgSrcByName(e.name),alt:e.name}),u(H4,{children:e.name}),u(ChevronRight,{})]})},balanceInfo="_balanceInfo_172y5_1",Styles$d={balanceInfo},BalanceWithLegaueView=()=>u("div",{class:Styles$d.balanceInfo,children:[u(AnimatedBalanceView,{}),u(CurrentLegaueView,{})]}),container$1="_container_sn75j_1",Styles$c={container:container$1},BalanceWithCoin=()=>u("div",{class:Styles$c.container,children:[u(BalanceWithLegaueView,{}),u(CoinTapView,{})]}),wrapper$3="_wrapper_iqvdz_1",Styles$b={wrapper:wrapper$3},wrapper$2="_wrapper_16ny2_1",progressBackground="_progressBackground_16ny2_6",progressLine="_progressLine_16ny2_16",Styles$a={wrapper:wrapper$2,progressBackground,progressLine},ProgressBar=t=>u("div",{class:Styles$a.wrapper,children:u("div",{class:Styles$a.progressBackground,children:u("div",{class:Styles$a.progressLine,style:{width:`${t.currentEnergy}%`}})})}),wrapper$1="_wrapper_tzq8x_1",text$2="_text_tzq8x_8",value="_value_tzq8x_13",Styles$9={wrapper:wrapper$1,text:text$2,value},ProgressContainer=t=>u("div",{class:Styles$9.wrapper,children:[u("div",{class:Styles$9.text,children:[u(SmallImgContainer,{img:enegryImg,alt:"progress value"}),u("div",{class:Styles$9.value,children:[u(H4,{children:t.currentEnergy}),u(H6,{children:["/ ",t.energiLimit]})]})]}),u(ProgressBar,{currentEnergy:t.currentEnergy/t.energiLimit*100})]});function EnergyView(){const t=q(AppContext),e=useSignal(t.player.currentEnergy);return O(()=>{e.value=t.player.currentEnergy}),useOnMount(()=>{const n=setInterval(()=>{e.value=t.player.currentEnergy},500);return()=>clearInterval(n)}),u("div",{class:Styles$b.wrapper,children:u(ProgressContainer,{currentEnergy:e.value,energiLimit:t.player.currentEnergyLevel.limit})})}const wrapper="_wrapper_1ab1s_1",Styles$8={wrapper},NavWithProgress=()=>u("div",{class:Styles$8.wrapper,children:[u(EnergyView,{}),u(BottomNav,{})]});function TapsPage(){return useOnMount(()=>{const t=e=>{e.preventDefault()};return window.addEventListener("contextmenu",t),window.addEventListener("touchmove",t,{passive:!1}),lockPage(!0),()=>{lockPage(!1),window.removeEventListener("touchmove",t),window.removeEventListener("contextmenu",t)}}),u(Layout,{page:"main",children:[u(Container,{children:[u("div",{id:"animation_layer",className:Styles$Z.animationLayer,children:u("canvas",{})}),u(BalanceWithCoin,{})]}),u(BottomConent,{children:u(NavWithProgress,{})})]})}const tabsContainer="_tabsContainer_ly1k8_1",tabs="_tabs_ly1k8_1",tab="_tab_ly1k8_1",active="_active_ly1k8_30",taskAlert="_taskAlert_ly1k8_34",Styles$7={tabsContainer,tabs,tab,active,taskAlert},TabsView=t=>u("div",{class:Styles$7.tabsContainer,children:[u("div",{class:Styles$7.tabs,children:t.tabs.map((e,n)=>u("button",{onClick:()=>t.onTabChange(n),class:`${Styles$7.tab} ${t.activeTab===n&&Styles$7.active} ${e.taskAlert&&Styles$7.taskAlert}`,children:e.title},n))}),t.tabs.map((e,n)=>t.activeTab===n&&e.tab)]}),taskListImg="/assets/tasklist-QmnCOg_x.png",claimImg="/assets/congratulations-xzur9oKX.png",image="_image_19lh0_1",price="_price_19lh0_13",drowerAction="_drowerAction_19lh0_23",text$1="_text_19lh0_30",desc="_desc_19lh0_40",Styles$6={image,price,drowerAction,text:text$1,desc},ClaimPopUpView=t=>{const e=q(AppContext),n=e.player.claims.value.find(s=>s===t.missionConf.id),i=T(async()=>{try{if(!n)return;const s=await e.api.player_claimReward.post({task_id:n});e.player.update(s.player),e.notification.showInfo("Done!")}catch(s){e.log.error("player_claimReward",s),e.notification.showError("Error!")}},[e.api.player_claimReward,e.log,e.notification,e.player,n]);return u(BaseDrower,{onAction:i,onClose:()=>i,btnVariant:"primary",btnText:L.button.claim,children:[u("div",{class:Styles$6.image,children:u("img",{src:claimImg,alt:"congratulations"})}),u("div",{class:Styles$6.drowerAction,children:[u("div",{class:Styles$6.text,children:[u(H2,{children:L.missions.conget}),u("div",{class:Styles$6.desc,children:u(Body1,{children:L.missions.congret_desc})})]}),u("div",{class:Styles$6.price,children:[u("img",{src:coinImg,alt:"coin"}),u(H3,{children:formatWithSpaces(t.missionConf.reward)})]})]})]})};function linkToSocial(t){if(t.link)return t.link;if(!t.name)throw new Error("Social name is not defined");switch(t.type){case"tg":return`https://t.me/${t.name.replace("@","")}`;case"x":return`https://twitter.com/${t.name}`;default:return t.name}}const item$1="_item_10hts_1",link$1="_link_10hts_10",disabled$1="_disabled_10hts_22",done$1="_done_10hts_27",Styles$5={item:item$1,link:link$1,disabled:disabled$1,done:done$1},MissionSocialItem=({item:t,confItem:e,disabled:n,onSubmit:i,claim:s,instrunctions:o})=>{const c=!t||!t.verified,[m,v]=h(!1),l=T(()=>t?Math.max(t.verified_at!==void 0?t.verified_at+3e4-time.now():0,0):0,[t]),[d,y]=h(t!==void 0&&(t.verified||t.verified_at!==void 0));p(()=>{y(d||t!==void 0&&(t.verified||t.verified_at!==void 0))},[d,t]);const f=useSignal(l());p(()=>{const b=setInterval(()=>{f.value=l(),f.value>0&&v(!1)},1e3);return()=>clearInterval(b)},[l,t,f]);const S=async()=>{v(!0),await i()},w=()=>{setTimeout(()=>y(!0),1e3)};return u("div",{className:`${Styles$5.item} ${n&&Styles$5.disabled}`,children:[u("a",{onClick:w,href:linkToSocial(e),target:"_blank",class:Styles$5.link,children:[u(H5,{children:o||L.missions.instructions[e.type]}),!s&&c&&f.value>0&&u(Body2,{children:L.missions.erroe_message})]}),t&&!d&&u("a",{onClick:w,href:linkToSocial(e),target:"_blank",children:u(ActionButton,{onClick:async()=>{},size:"small",variant:"secondary",children:L.button.go})}),t&&d&&u(g,{children:(n||c)&&!s?u(ActionButton,{onClick:S,size:"small",variant:"secondary",disabled:c&&f.value>0||n||m,children:f.value>0?formatTimeLeft(f.value):L.button.check}):u("div",{class:Styles$5.done,children:L.missions.done})})]})},container="_container_1qbto_1",content$2="_content_1qbto_13",list="_list_1qbto_22",completed="_completed_1qbto_28",Styles$4={container,content:content$2,list,completed},item="_item_w3cz8_1",link="_link_w3cz8_10",mainText="_mainText_w3cz8_21",text="_text_w3cz8_28",disabled="_disabled_w3cz8_32",done="_done_w3cz8_37",Styles$3={item,link,mainText,text,disabled,done},MissionWalletItem=({item:t,disabled:e,onSubmit:n,claim:i})=>{const s=q(AppContext),o=!t||!t.verified,[c,m]=h(!1),v=T(()=>!t||t.verified?0:Math.max(t.verified_at!==void 0?t.verified_at+3e4-time.now():0,0),[t]),l=useSignal(v());p(()=>{const y=setInterval(()=>{l.value=v(),l.value>0&&m(!1)},1e3);return()=>clearInterval(y)},[v,t,l]);const d=async()=>{m(!0),await n()};return u("div",{className:`${Styles$3.item} ${e&&Styles$3.disabled}`,children:u("div",{className:Styles$3.link,children:[u("div",{className:Styles$3.mainText,children:[u("h5",{className:Styles$3.text,children:L.missions.solana_wallet}),u(ActionButton,{variant:"secondary",size:"small",onClick:async()=>{const y=await s.api.wallet_getLoginToken.post({});Telegram.WebApp.openLink(`/wallet/?token=${y.token}&userId=${s.player.id}`)},children:(e||o)&&!i?L.button.go:L.button.open}),t&&u(g,{children:(e||o)&&!i?u(ActionButton,{onClick:d,variant:"secondary",size:"small",disabled:o&&l.value>0||e||c,children:l.value>0?formatTimeLeft(l.value):L.button.check}):u("div",{class:Styles$3.done,children:L.missions.done})})]}),!i&&o&&l.value>0&&u(Body2,{children:L.missions.erroe_message})]})})},content$1="_content_c1c79_1",Styles$2={content:content$1},MissonInputItem=({confItem:t,item:e,onSubmit:n,disabled:i})=>{var v;const s=q(AppContext),[o,c]=h(""),m=((v=e==null?void 0:e.user_data)==null?void 0:v.solana_addr)||"";return u("div",{class:`${Styles$2.content} ${i&&Styles$2.disable}`,children:[u(H5,{children:t.name}),u("input",{type:"string",disabled:i,value:m,onChange:l=>c(l.currentTarget.value)}),u(ActionButton,{onClick:async()=>{if(t.type==="solana_addr"&&o.length<40)return s.notification.showError("Invalid Solana address");await n(o)},size:"small",variant:"secondary",disabled:i,children:L.button.submit})]})},content="_content_mpn7y_1",info="_info_mpn7y_13",Styles$1={content,info},RewardView=t=>u("div",{class:Styles$1.content,children:[u("img",{src:CoinImg,alt:"coin"}),u("div",{class:Styles$1.info,children:[u(H5,{children:L.missions.reward}),u(Body2,{children:formatWithSpaces(t.reward)})]})]}),MissionView=({mConf:t})=>{const e=q(AppContext),[n,i]=h(e.account.getActiveMission(t.id)),s=e.player.claims.value.find(l=>l===t.id),o=e.account.isMissionCompleted(t.id),c=T(async(l,d)=>{try{const y=await e.api.missions_finishMissionItem.post({id:t.id,itemIndex:l,user_input:d});e.account.update(y.account),i(e.account.getActiveMission(t.id))}catch(y){e.notification.showError(y.message)}},[e.account,e.api.missions_finishMissionItem,e.notification,t.id]),m=async()=>{try{const l=await e.api.missions_finishMission.post({id:t.id});e.account.update(l.account),e.player.update(l.player),i(e.account.getActiveMission(t.id))}catch(l){e.notification.showError(l.message)}},v=T(async()=>{await e.api.missions_joinMission.post({id:t.id}).then(l=>{e.account.update(l.account),i(e.account.getActiveMission(t.id))}).catch(l=>{e.log.error(l)})},[e.account,e.api.missions_joinMission,e.log,t.id]);return u("div",{className:Styles$4.container,children:u("div",{class:Styles$4.content,children:[u(BackButton,{}),u(TitleDescriptionView,{title:t.title,desc:t.description}),u(RewardView,{reward:t.reward}),!n&&!o&&u(ActionButton,{variant:"secondary",size:"large",onClick:v,children:L.button.start_mission}),o&&u("div",{className:Styles$4.completed,children:L.missions.completed}),u(H4,{children:L.missions.your_task}),u(List,{children:t.items.map((l,d)=>{if(l.type==="wallet_connect")return u(MissionWalletItem,{item:n==null?void 0:n.items[d],onSubmit:()=>c(d),disabled:!1,claim:o});if(l.type!=="solana_addr"){const f=(L.missions.individual_instrunctions[t.id]||[])[d];return u(MissionSocialItem,{confItem:t.items[d],item:n==null?void 0:n.items[d],disabled:!n&&!o,claim:o,onSubmit:()=>c(d),instrunctions:f})}return u(MissonInputItem,{disabled:!n||!!((n==null?void 0:n.items[d])!==void 0&&(n!=null&&n.items[d].verified)),confItem:t.items[d],item:n==null?void 0:n.items[d],onSubmit:y=>c(d,y)})})}),n&&u(ActionButton,{variant:"secondary",size:"large",onClick:m,disabled:!e.account.canFinishMission(t.id),children:L.button.finish_mission}),s&&u(ClaimPopUpView,{missionConf:t})]})})},MissionsView=()=>{var s,o;const t=q(AppContext),e=(s=t.navService.pageProps)!=null&&s.mission?(o=t.navService.pageProps)==null?void 0:o.mission:null,[n,i]=h(e);return n?u(MissionView,{mConf:n}):u(List,{children:t.account.availableMissions.concat(t.account.finishedMissions).map(c=>{const m=t.player.claims.value.find(l=>l===c.id)===c.id,v=t.account.isMissionCompleted(c.id);return u(ListItem,{name:c.title,img:taskListImg,balance:c.reward,completed:!m&&v,needAction:m,onClick:()=>{t.navService.regBackFunction(()=>i(null)),i(c)}})})})},listItem="_listItem_c1rrx_1",listItemBody="_listItemBody_c1rrx_9",navigationBox="_navigationBox_c1rrx_16",percentageBox="_percentageBox_c1rrx_22",reward="_reward_c1rrx_26",Styles={listItem,listItemBody,navigationBox,percentageBox,reward},ListItemTask=t=>u("div",{class:`${Styles.listItem}`,children:[u("div",{class:`${Styles.listItemBody}`,children:[u(ListItemInfoView,{img:t.img,name:t.name,balance:t.reward}),u("div",{class:Styles.navigationBox,children:u(ActionButton,{variant:"primary",size:"small",onClick:t.onClaim,disabled:t.disabled,children:L.button.claim})})]}),t.percentage<100&&u("div",{className:Styles.percentageBox,children:u(ProgressLeagueBar,{currentEnergy:t.percentage})})]}),TaskList=t=>u(List,{children:t.tasks.map((e,n)=>u(ListItemTask,{name:e.title,reward:e.reward,img:e.image,percentage:e.percentage,disabled:!e.canClaim,onClaim:()=>t.onClaim(e)},n))}),TaskView=()=>{const t=q(AppContext),[e,n]=h(0),i=T(()=>{const d=t.player.getClaimsByType("L");return t.gameConf.ligues.map((y,f)=>({taskId:`L${f}`,title:y.name,reward:y.reward,canClaim:d.includes(f),image:getLigueImgSrcByName(y.name),percentage:y.score>0?t.player.totalEarned*100/y.score:0})).filter((y,f)=>d.includes(f)||f>t.player.ligue)},[t.gameConf.ligues,t.player]),s=T(()=>{const d=t.player.getClaimsByType("R");return t.gameConf.ref_rewards.map((y,f)=>({taskId:`R${f}`,title:`Invite ${y.cnt} friends`,reward:y.reward,canClaim:d.includes(f),image:image$2,cnt:y.cnt,percentage:t.player.stat.ref_cnt*100/y.cnt})).filter((y,f)=>d.includes(f)||t.player.stat.ref_cnt<y.cnt)},[t.gameConf.ref_rewards,t.player]),[o,c]=h(i()),[m,v]=h(s()),l=T(async d=>{try{const y=await t.api.player_claimReward.post({task_id:d.taskId});if(t.player.update(y.player),d.taskId.startsWith("L")){const f=i();c(f)}else{const f=s();v(f)}t.notification.showInfo("Done!")}catch(y){t.log.error("player_claimReward",y),t.notification.showError("Error!")}},[t.api.player_claimReward,t.log,t.notification,t.player,i,s]);return u(Container,{children:[u(BalanceWithLegaueView,{}),u(Hr,{}),u(TabsView,{onTabChange:d=>{n(d),t.navService.clean()},activeTab:e,tabs:[{title:L.task.tabs.missions,tab:u(MissionsView,{}),taskAlert:t.player.getClaimsByType("M").length>0||t.account.availableMissions.length>0},{title:L.task.tabs.leagues,tab:u(TaskList,{tasks:o,onClaim:l}),taskAlert:o.find(d=>d.canClaim)!==void 0},{title:L.task.tabs.ref_task,tab:u(TaskList,{tasks:m,onClaim:l}),taskAlert:m.find(d=>d.canClaim)!==void 0}]}),u(BottomConent,{compensator:!0,children:u(BottomNav,{})})]})};function TaskPage(){const t=q(AppContext);return useOnMount(()=>{t.tapsSubmitService.submitTaps().catch(e=>t.log.error("submitTaps failed",e))}),u(Layout,{children:u(TaskView,{})})}function MainPage(){const t=q(AppContext),[e,n]=h(null),[i,s]=h(null),[o,c]=h(null),[m,v]=h(),[l,d]=h(),y=T(()=>{if(t.localData.needWait||e)return;const S=()=>{if(t.player.ligue<2)return;const w=t.account.availableMissions.find(b=>b.id==="M0");w&&d(w)};s(!1),t.doLogin().then(w=>{if(w){if(w instanceof ApiError){w.status>=500&&s(!0);return}t.login(w),n(w.player),v(t.player.notificationClaim),S()}}).catch(w=>{t.log.error("login_failed",w)})},[t,e]),f=T(()=>{if(Telegram.WebApp.expand(),t.initAppBot(),t.initLocalData(),t.navService.init(),Telegram.WebApp.setHeaderColor("#251F33"),Telegram.WebApp.setBackgroundColor("#251F33"),Telegram.WebApp.ready(),t.env==="prod"&&!isMobileDevice()){c(!0);return}t.localData.needWait&&s(!0)},[t]);return useOnMount(()=>{f(),y()}),o===!0?u(Layout,{page:"loading",children:u(LeaveView,{})}):i?u(Layout,{page:"loading",children:[(t.env!=="prod"||t.debugEnabled)&&u(LogConsole,{}),u(WaitView,{onReload:()=>y()})]}):e?u(g,{children:[(t.env!=="prod"||t.debugEnabled)&&u(LogConsole,{}),t.navService.page==="taps"&&u(TapsPage,{}),t.navService.page==="task"&&u(TaskPage,{}),t.navService.page==="boost"&&u(BoostPage,{}),t.navService.page==="ligue"&&u(LiguePage,{}),t.navService.page==="ref"&&u(RefPage,{}),t.navService.page==="stat"&&u(StatPage,{}),m&&u(NotificationClaimPopupView,{notification:m,onClose:()=>{v(void 0)}}),l&&u(MissionReminerPopupView,{mission:l,onClose:()=>{d(void 0)}}),t.player.tappedBalance<0&&u(BotEarningsPopupView,{})]}):u(Layout,{page:"loading",children:[(t.env!=="prod"||t.debugEnabled)&&u(LogConsole,{}),u(LoadingView,{})]})}function App(){return u(AppContext.Provider,{value:appContextValue,children:[u(MainPage,{}),u("div",{id:"_chr_"})]})}q$1(u(App,{}),document.getElementById("app"));
//# sourceMappingURL=main-ZdCo03wY.js.map
